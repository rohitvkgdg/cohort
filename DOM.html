<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>DOM</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>
<script>
  function calculate() {
    let n1 = document.getElementById("num1").value;
    let n2 = document.getElementById("num2").value;
    // const res = document.getElementById("final")
    // res.innerHTML = parseInt(n1) + parseInt(n2);

    // Using fetch-then
    fetch("https://sum-server.100xdevs.com/sum?a=" + n1 + "&b=" + n2)
      .then(function (response) {
        response.text()
          .then(function (response) {
            document.getElementById("final").innerHTML = (n1 + n2);
          })
      })
  }
  // Using async await fetch
  async function calculate1() {
    let n1 = document.getElementById("num1").value;
    let n2 = document.getElementById("num2").value;
    const response = await fetch("https://sum-server.100xdevs.com/sum?a=" + n1 + "&b=" + n2);
    const finalAns = await response.text();
    document.getElementById("final").innerHTML = "<br>" + finalAns;
  }

  //Now to make it more efficient by debouncing, example search box suggestions, this saves a lot of unnecessary calls to backend
  let timer;
  function debounceCalculate(){
    clearTimeout(timer);
    timer = setTimeout(calculate1, 500);
  }
</script>

<body>
  <input type="text" placeholder="First Number" id="num1" oninput="debounceCalculate()"><br><br>
  <input type="text" placeholder="Second Number" id="num2" oninput="debounceCalculate()"><br><br>
  <div id="final"></div>
</body>

</html>